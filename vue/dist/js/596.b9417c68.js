"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[596],{7596:function(t,e,s){s.r(e),s.d(e,{default:function(){return l}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("div",{staticStyle:{width:"70%",margin:"30px auto","min-height":"1000px"}},[e("div",{staticStyle:{"text-align":"center"}},[e("el-button",{attrs:{type:"success"}},[t._v(t._s("VIDEO"===t.courseData.type?"视频课":"图文课"))]),e("span",{staticStyle:{"font-size":"20px","font-weight":"550",color:"#333333","margin-left":"20px"}},[t._v(t._s(t.courseData.name))])],1),e("div",{staticStyle:{"text-align":"center","margin-top":"15px"}},[t.courseData.price>0?e("span",{staticStyle:{color:"red"}},[t._v("￥ "+t._s(t.courseData.price)+" / 元")]):e("span",{staticStyle:{color:"red"}},[t._v("公开课")]),t.courseData.discount<1?e("span",{staticStyle:{color:"#509a4d","margin-left":"20px"}},[t._v(t._s(10*t.courseData.discount)+" 折")]):t._e(),e("span",{staticStyle:{color:"#666666","margin-left":"50px"}},[t._v("发布时间："+t._s(t.courseData.time))])]),e("div",[e("div",{staticStyle:{"font-size":"18px",margin:"10px 0"}},[t._v("课程资料")]),0===t.courseData.price||t.flag?e("div",["VIDEO"===t.courseData.type?e("video",{staticStyle:{width:"65%",height:"400px"},attrs:{src:t.courseData.video,controls:""}}):t._e(),e("div",{staticStyle:{"margin-top":"10px"}},[t._v("资料链接："),e("a",{attrs:{href:t.courseData.file,target:"_blank"}},[t._v(t._s(t.courseData.file))])])]):e("div",[e("span",{staticStyle:{color:"red","margin-right":"20px"}},[t._v("该课程属于付费课程，购买后可解锁")]),e("el-button",{attrs:{type:"warning",size:"mini"},on:{click:t.buy}},[t._v("购买课程")])],1)]),e("div",{staticStyle:{"margin-top":"20px"}},[e("div",{staticStyle:{"font-size":"18px"}},[t._v("课程介绍")]),e("div",{staticClass:"w-e-text w-e-text-container",staticStyle:{"margin-top":"10px"},domProps:{innerHTML:t._s(t.courseData.content)}})]),e("div",{staticStyle:{"margin-top":"50px","font-size":"18px"}},[t._v("欢迎发表您宝贵的意见")]),e("div",{staticStyle:{"margin-top":"20px"}},[e("el-input",{attrs:{type:"textarea",rows:5},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),e("div",{staticStyle:{"margin-top":"10px","text-align":"right"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit(t.content,0)}}},[t._v("提交")])],1),e("div",{staticStyle:{"margin-top":"30px","margin-bottom":"500px"}},t._l(t.commentData,(function(s){return e("el-row",{staticStyle:{"margin-bottom":"30px"}},[e("el-col",{attrs:{span:4}},[e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:s.userAvatar,alt:""}}),e("div",{staticStyle:{flex:"1","margin-left":"10px"}},[t._v(t._s(s.userName))])])]),e("el-col",{attrs:{span:20}},[e("div",{staticStyle:{height:"50px","line-height":"50px"}},[e("el-row",[e("el-col",{staticStyle:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:18}},[t._v(t._s(s.content))]),e("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v(t._s(s.time))])],1)],1),t._l(s.children,(function(s){return e("div",{staticStyle:{"margin-bottom":"5px"}},[e("el-row",[e("el-col",{attrs:{span:5}},[e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:s.userAvatar,alt:""}}),e("div",{staticStyle:{flex:"1","margin-left":"10px"}},[t._v(t._s(s.userName)+" 回复：")])])]),e("el-col",{staticStyle:{height:"50px","line-height":"50px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},attrs:{span:13}},[t._v(t._s(s.content))]),e("el-col",{staticStyle:{height:"50px","line-height":"50px","text-align":"right"},attrs:{span:6}},[t._v(t._s(s.time))])],1)],1)})),e("div",{staticStyle:{"margin-top":"20px"}},[e("el-input",{staticStyle:{width:"400px"},model:{value:s.tmp,callback:function(e){t.$set(s,"tmp",e)},expression:"item.tmp"}}),e("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:function(e){return t.submit(s.tmp,s.id)}}},[t._v("回复")])],1)],2)],1)})),1)])])},a=[],r=(s(5507),{data(){let t=this.$route.query.id;return{user:JSON.parse(localStorage.getItem("xm-user")||"{}"),courseId:t,courseData:{},flag:!1,content:null,commentData:[]}},mounted(){this.loadCourse(),this.checkCourse(),this.loadComment()},methods:{checkCourse(){this.$request.get("/orders/selectAll",{params:{userId:this.user.id,courseId:this.courseId}}).then((t=>{"200"===t.code?t.data.length>0&&(this.flag=!0):this.$message.error(t.msg)}))},loadCourse(){this.$request.get("/course/selectById/"+this.courseId).then((t=>{"200"===t.code?this.courseData=t.data:this.$message.error(t.msg)}))},buy(){let t={courseId:this.courseId,userId:this.user.id};this.$request.post("/orders/add",t).then((t=>{"200"===t.code?(this.$message.success("购买成功，已解锁课程"),this.loadCourse(),this.checkCourse()):this.$message.error(t.msg)}))},submit(t,e){let s={userId:this.user.id,courseId:this.courseId,content:t,parentId:e};this.$request.post("/comment/add",s).then((t=>{"200"===t.code?(this.$message.success("评论成功"),this.content=null,this.loadComment()):this.$message.error(t.msg)}))},loadComment(){this.$request.get("/comment/selectAll",{params:{courseId:this.courseId}}).then((t=>{"200"===t.code?this.commentData=t.data:this.$message.error(t.msg)}))}}}),o=r,c=s(1656),n=(0,c.A)(o,i,a,!1,null,null,null),l=n.exports}}]);
//# sourceMappingURL=596.b9417c68.js.map